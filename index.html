<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìš°ë¦¬ ì•„ì´ í•™ìŠµ ì„±í–¥ ì§„ë‹¨ í…ŒìŠ¤íŠ¸</title>
<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
<style>
/* [ìŠ¤íƒ€ì¼ ì •ì˜] ë…¸ì…˜ ìŠ¤íƒ€ì¼ ê¸°ë°˜ + ê¹”ë”í•œ UI */
:root {
--bg-color: #ffffff;
--text-color: #37352f;
--primary-color: #ff7b00;
--gray-light: #f7f7f5;
--border-color: #e0e0e0;
}

    body {
        font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        display: flex;
        justify-content: center;
        min-height: 100vh;
        line-height: 1.6;
        position: relative;
    }

    .container {
        width: 100%;
        max-width: 500px;
        padding: 40px 20px;
        text-align: center;
        position: relative;
    }

    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn {
        display: block;
        width: 100%;
        padding: 18px;
        margin-bottom: 12px;
        border: 1px solid var(--border-color);
        border-radius: 12px;
        background-color: white;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: 0.2s;
        color: var(--text-color);
        text-align: left;
    }
    .btn:hover {
        background-color: var(--gray-light);
        border-color: #999;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    .btn-center { text-align: center; }

    .btn-primary {
        background-color: var(--text-color);
        color: white;
        font-weight: bold;
        text-align: center;
        border: none;
    }
    .btn-primary:hover {
        background-color: #555;
        color: white;
    }

    /* ëª¨ë“œ ì„ íƒ ë²„íŠ¼ */
    .mode-btn {
        padding: 30px 20px;
        margin-bottom: 20px;
        border: 2px solid var(--border-color);
        border-radius: 16px;
        background: white;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .mode-btn:hover, .mode-btn.selected {
        border-color: var(--primary-color);
        background-color: #f0f9ff;
    }
    .mode-title { font-size: 20px; font-weight: 800; display: block; margin-bottom: 8px; }
    .mode-desc { font-size: 14px; color: #666; font-weight: normal; }

    /* í™”ë©´ ì „í™˜ */
    .screen { display: none; opacity: 0; transition: opacity 0.5s; }
    .active { display: block; opacity: 1; }

    /* íƒ€ì´í¬ê·¸ë˜í”¼ */
    .title { font-size: 28px; font-weight: 800; margin-bottom: 10px; word-break: keep-all; }
    .subtitle { font-size: 16px; color: #666; margin-bottom: 40px; }

    /* ì§„í–‰ë°” */
    .progress-container {
        width: 100%;
        height: 6px;
        background-color: var(--gray-light);
        margin-bottom: 40px;
        border-radius: 3px;
        overflow: hidden;
    }
    .progress-fill {
        height: 100%;
        background-color: var(--text-color);
        width: 0%;
        transition: width 0.3s;
    }

    /* ì§ˆë¬¸ í™”ë©´ */
    .q-badge {
        display: inline-block;
        background: var(--gray-light);
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 700;
        margin-bottom: 15px;
        color: #666;
    }
    .question-text {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 40px;
        word-break: keep-all;
    }

    /* ê²°ê³¼ í™”ë©´ & ë¸”ëŸ¬ ì²˜ë¦¬ */
    .result-content-wrapper {
        transition: filter 0.5s;
    }
    .blurred {
        filter: blur(12px);
        user-select: none;
        pointer-events: none;
        overflow: hidden;
        opacity: 0.6; /* ì‚´ì§ íˆ¬ëª…í•˜ê²Œ í•´ì„œ ë” ì•ˆ ë³´ì´ê²Œ */
    }

    /* ì •ë³´ ì…ë ¥ ê²Œì´íŠ¸ (ì˜¤ë²„ë ˆì´) */
    #gate-overlay {
        display: none;
        position: fixed; /* í™”ë©´ ê³ ì • */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 85%;
        max-width: 380px;
        background: rgba(255, 255, 255, 0.95); /* ì•½ê°„ì˜ íˆ¬ëª…ë„ */
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        z-index: 9999;
        text-align: center;
        backdrop-filter: blur(5px); /* ë°°ê²½ ë¸”ëŸ¬ íš¨ê³¼ */
        border: 1px solid rgba(0,0,0,0.05);
    }

    .form-label { display: block; text-align: left; font-size: 13px; font-weight: bold; margin-bottom: 6px; color: #555; }
    .form-input, .form-select {
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 15px;
        box-sizing: border-box;
        font-family: inherit;
    }
    .form-input:focus, .form-select:focus {
        outline: none;
        border-color: var(--primary-color);
    }

    /* ê²°ê³¼ ì´ë¯¸ì§€ (ë…¸ì…˜ ìŠ¤íƒ€ì¼) */
    .result-img-container {
        width: 150px;
        height: 150px;
        margin: 0 auto 20px;
        border-radius: 50%;
        background-color: var(--gray-light);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--text-color);
    }
    .result-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .result-tag {
        display: inline-block;
        background-color: var(--text-color);
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: bold;
        margin-bottom: 15px;
    }
    .result-title { font-size: 26px; font-weight: 800; margin-bottom: 10px; line-height: 1.3; }
    .result-desc-box {
        background-color: var(--gray-light);
        padding: 24px;
        border-radius: 16px;
        text-align: left;
        margin-bottom: 24px;
    }
    .box-title { font-size: 18px; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; }
    .box-text { font-size: 15px; color: #444; margin: 0; white-space: pre-line; }

    .recommend-box {
        border: 2px solid var(--primary-color);
        background-color: #f0f9ff;
        padding: 24px;
        border-radius: 16px;
        text-align: center;
        margin-bottom: 30px;
    }
    .rec-label { font-size: 14px; color: var(--primary-color); font-weight: 700; margin-bottom: 8px; text-transform: uppercase; }
    .rec-program { font-size: 24px; font-weight: 800; color: #000; word-break: keep-all; }
    .rec-sub { font-size: 14px; color: #666; margin-top: 8px; }

    /* ì ìˆ˜ ì°¨íŠ¸ ìŠ¤íƒ€ì¼ */
    .score-chart-box {
        background-color: var(--gray-light);
        padding: 24px;
        border-radius: 16px;
        margin-bottom: 24px;
    }
    .score-item {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
    }
    .score-item:last-child {
        margin-bottom: 0;
    }
    .score-label {
        width: 80px;
        font-size: 13px;
        font-weight: 600;
        color: #555;
        text-align: left;
    }
    .score-bar-container {
        flex: 1;
        height: 20px;
        background-color: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        margin: 0 10px;
    }
    .score-bar {
        height: 100%;
        border-radius: 10px;
        transition: width 0.8s ease;
    }
    .score-bar.t1 { background: linear-gradient(90deg, #6366f1, #818cf8); }
    .score-bar.t2 { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .score-bar.t3 { background: linear-gradient(90deg, #10b981, #34d399); }
    .score-bar.t4 { background: linear-gradient(90deg, #ec4899, #f472b6); }
    .score-bar.t5 { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
    .score-value {
        width: 35px;
        font-size: 14px;
        font-weight: 700;
        color: var(--text-color);
        text-align: right;
    }

</style>

</head>
<body>

<div class="container">

<div id="start-screen" class="screen active">
    <h1 class="title">ìš°ë¦¬ ì•„ì´<br>í•™ìŠµ ì„±í–¥ ì§„ë‹¨</h1>
    <p class="subtitle">ì•„ì´ì˜ ì„±ì , 'ë…¸ë ¥'ì´ ì•„ë‹ˆë¼<br>'ë°©ë²•'ì´ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>20ë¬¸í•­ìœ¼ë¡œ ì •í™•í•œ í•´ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”.</p>
    <div style="font-size: 60px; margin-bottom: 40px;">âœï¸</div>
    <button class="btn btn-primary btn-center" onclick="startTest()">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</button>
    <p style="font-size: 12px; color: #999; margin-top: 20px;">ì†Œìš”ì‹œê°„: ì•½ 3ë¶„ | ì´ 20ë¬¸í•­</p>
</div>

<div id="question-screen" class="screen">
    <div class="progress-container">
        <div class="progress-fill" id="progress"></div>
    </div>
    <div class="q-badge" id="q-number">Q1</div>
    <div class="question-text" id="question">ì§ˆë¬¸ í…ìŠ¤íŠ¸</div>
    <button class="btn" id="btn-a" onclick="selectOption('A')">A ì˜µì…˜</button>
    <button class="btn" id="btn-b" onclick="selectOption('B')">B ì˜µì…˜</button>
</div>

<div id="mode-screen" class="screen">
    <h1 class="title">ì§„ë‹¨ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì–´ë–¤ ìˆ˜ì—…ì„ í¬ë§í•˜ì‹œë‚˜ìš”?</h1>
    <p class="subtitle">í¬ë§í•˜ì‹œëŠ” ìˆ˜ì—… ë°©ì‹ì— ë”°ë¼<br>ìµœì í™”ëœ ì²˜ë°©ì „ì„ ë°œê¸‰í•´ë“œë¦½ë‹ˆë‹¤.</p>

    <div class="mode-btn" onclick="selectMode('online')">
        <span class="mode-title">ğŸ’» ì˜¨ë¼ì¸ ìˆ˜ì—…</span>
        <span class="mode-desc">ì§‘ì—ì„œ ì²´ê³„ì ì¸ ê´€ë¦¬ì™€<br>ìŠµê´€ì„ ì¡ê³  ì‹¶ì–´ìš”.</span>
    </div>

    <div class="mode-btn" onclick="selectMode('offline')">
        <span class="mode-title">ğŸ« ì˜¤í”„ë¼ì¸ ì„¼í„° ìˆ˜ì—…</span>
        <span class="mode-desc">í˜„ì¥ì—ì„œ ë°€ë„ ìˆëŠ” ê´€ë¦¬ì™€<br>ì¦‰ê°ì ì¸ í”¼ë“œë°±ì„ ì›í•´ìš”.</span>
    </div>
</div>

<div id="loading-screen" class="screen">
    <div style="margin-top: 50%;">
        <div style="font-size: 40px; margin-bottom: 20px;">ğŸ”„</div>
        <h2 style="margin: 0;">ë°ì´í„° ë¶„ì„ ì¤‘...</h2>
        <p style="color: #666;">ì•„ì´ì˜ ì„±í–¥ê³¼ í•™ìŠµ íŒ¨í„´ì„<br>ì •ë°€í•˜ê²Œ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
    </div>
</div>

<div id="result-screen" class="screen">

    <div id="gate-overlay">
        <div style="font-size: 30px; margin-bottom: 10px;">ğŸ”’</div>
        <h2 style="font-size: 20px; font-weight: 800; margin: 0 0 10px 0;">ê²°ê³¼ ë¶„ì„ ì™„ë£Œ</h2>
        <p style="color: #666; font-size: 13px; margin-bottom: 20px; line-height: 1.4;">ìƒì„¸í•œ ì§„ë‹¨ ê²°ê³¼ì™€ ë§ì¶¤ ì²˜ë°©ì„ í™•ì¸í•˜ë ¤ë©´<br>ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>

        <div style="text-align: left;">
            <label class="form-label">í•™ìƒ ì´ë¦„</label>
            <input type="text" id="user-name" class="form-input" placeholder="ì˜ˆ: ê¹€ì² ìˆ˜">

            <label class="form-label">í•™ë¶€ëª¨ ì—°ë½ì²˜</label>
            <input type="tel" id="user-phone" class="form-input" placeholder="ì˜ˆ: 010-1234-5678">

            <label class="form-label">í•™ë…„</label>
            <select id="user-grade" class="form-select">
                <option value="" disabled selected>í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="ì´ˆ1">ì´ˆë“±í•™êµ 1í•™ë…„</option>
                <option value="ì´ˆ2">ì´ˆë“±í•™êµ 2í•™ë…„</option>
                <option value="ì´ˆ3">ì´ˆë“±í•™êµ 3í•™ë…„</option>
                <option value="ì´ˆ4">ì´ˆë“±í•™êµ 4í•™ë…„</option>
                <option value="ì´ˆ5">ì´ˆë“±í•™êµ 5í•™ë…„</option>
                <option value="ì´ˆ6">ì´ˆë“±í•™êµ 6í•™ë…„</option>
                <option value="ì¤‘1">ì¤‘í•™êµ 1í•™ë…„</option>
                <option value="ì¤‘2">ì¤‘í•™êµ 2í•™ë…„</option>
                <option value="ì¤‘3">ì¤‘í•™êµ 3í•™ë…„</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
        </div>

        <button class="btn btn-primary btn-center" style="margin-top: 5px;" onclick="unlockResult()">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
    </div>

    <div id="result-content" class="result-content-wrapper blurred">
        <div class="result-img-container">
            <img id="result-img" class="result-img" src="" alt="ê²°ê³¼ ìºë¦­í„°">
        </div>

        <div class="result-tag" id="result-code">TYPE</div>
        <h1 class="result-title" id="result-title">ìœ í˜• ì´ë¦„</h1>
        <p class="subtitle" id="result-quote" style="color: #333; font-style: italic;">"í•™ë¶€ëª¨ ê³ ë¯¼ ë©˜íŠ¸"</p>

        <div class="score-chart-box">
            <div class="box-title">ğŸ“Š ì˜ì—­ë³„ ì„±í–¥ ë¶„ì„</div>
            <div class="score-item">
                <span class="score-label">ì„±ì‹¤/ìˆœì‘</span>
                <div class="score-bar-container"><div class="score-bar t1" id="bar-t1"></div></div>
                <span class="score-value" id="val-t1">0</span>
            </div>
            <div class="score-item">
                <span class="score-label">íš¨ìœ¨/íšŒí”¼</span>
                <div class="score-bar-container"><div class="score-bar t2" id="bar-t2"></div></div>
                <span class="score-value" id="val-t2">0</span>
            </div>
            <div class="score-item">
                <span class="score-label">ì •í™•/ì‹ ì¤‘</span>
                <div class="score-bar-container"><div class="score-bar t3" id="bar-t3"></div></div>
                <span class="score-value" id="val-t3">0</span>
            </div>
            <div class="score-item">
                <span class="score-label">ìê¸°ì£¼ë„</span>
                <div class="score-bar-container"><div class="score-bar t4" id="bar-t4"></div></div>
                <span class="score-value" id="val-t4">0</span>
            </div>
            <div class="score-item">
                <span class="score-label">ì†ë„/ì§ê´€</span>
                <div class="score-bar-container"><div class="score-bar t5" id="bar-t5"></div></div>
                <span class="score-value" id="val-t5">0</span>
            </div>
        </div>

        <div class="result-desc-box">
            <div class="box-title">ğŸ” í•µì‹¬ ì§„ë‹¨</div>
            <p class="box-text" id="result-diagnosis">ì§„ë‹¨ ë‚´ìš©</p>
        </div>

        <div class="result-desc-box">
            <div class="box-title">ğŸ’Š ì§€ê¸ˆ í•„ìš”í•œ ê³µë¶€</div>
            <p class="box-text" id="result-prescription">ì²˜ë°© ë‚´ìš©</p>
        </div>

        <div class="recommend-box">
            <div class="rec-label">BEST SOLUTION</div>
            <div class="rec-program" id="result-program">ì¶”ì²œ ë°˜ ì´ë¦„</div>
            <div class="rec-sub" id="result-sub-program">ì¶”ì²œ ì˜µì…˜</div>
        </div>

        <button class="btn btn-primary btn-center" id="cta-button" onclick="goToConsult()">ìƒë‹´ ì‹ ì²­í•˜ê¸°</button>
        <button class="btn btn-center" onclick="location.reload()" style="background:#f1f1ef; color:#666; font-weight:normal;">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸°</button>
    </div>
</div>

</div>

<script>
// [ë°ì´í„° 1] ì§ˆë¬¸ 20ê°œ
const questions = [
{ q: "ë¬¸ì œë¥¼ í’€ ë•Œ ì•„ì´ëŠ” ë³´í†µ?", a: "ëê¹Œì§€ ë‹¤ ë§íˆë ¤ê³  ì²œì²œíˆ í‘¼ë‹¤", b: "ì¼ë‹¨ ë¹¨ë¦¬ í’€ê³  ë‚˜ì¤‘ì— ë‹¤ì‹œ ë³¸ë‹¤", tA: "T3", tB: "T5" },
{ q: "ìˆ™ì œí•  ë•Œ ì•„ì´ì˜ ëª¨ìŠµì€?", a: "ì‹œí‚¤ëŠ” ëŒ€ë¡œ ë‹¤ í•˜ê¸´ í•œë‹¤", b: "í•  ìˆ˜ëŠ” ìˆëŠ”ë° ìì£¼ ëŒ€ì¶© í•œë‹¤", tA: "T1", tB: "T2" },
{ q: "í‹€ë¦° ë¬¸ì œë¥¼ ëŒ€í•˜ëŠ” íƒœë„ëŠ”?", a: "ì™œ í‹€ë ¸ëŠ”ì§€ ê¼­ í™•ì¸í•œë‹¤", b: "ë‹¤ì‹œ ì•ˆ ë‚˜ì˜¤ë©´ ê·¸ëƒ¥ ë„˜ì–´ê°„ë‹¤", tA: "T3", tB: "T2" },
{ q: "ì„ ìƒë‹˜ì´ ê³ ì³ì¤€ ë‹µì„ ì•„ì´ëŠ”?", a: "ë‹¤ìŒì—” ê·¸ëŒ€ë¡œ ê³ ì³ì„œ ì“´ë‹¤", b: "ì•Œê² ë‹¤ê³ ëŠ” í•˜ëŠ”ë° ë˜ ìê¸° ë°©ì‹ëŒ€ë¡œ í•œë‹¤", tA: "T1", tB: "T4" },
{ q: "ì‹œí—˜ì—ì„œ ì‹¤ìˆ˜ëŠ”?", a: "ê±°ì˜ ì•ˆ í•˜ì§€ë§Œ ì‹œê°„ì´ ëª¨ìë¼ë‹¤", b: "í•­ìƒ 1~2ê°œëŠ” ê¼­ ì‹¤ìˆ˜í•œë‹¤", tA: "T3", tB: "T5" },
{ q: "ë‹¨ì–´ë¥¼ ì™¸ìš¸ ë•Œ ì•„ì´ëŠ”?", a: "ì •í™•í•˜ê²Œ ì—¬ëŸ¬ ë²ˆ í™•ì¸í•˜ë©° ì™¸ìš´ë‹¤", b: "ê°ìœ¼ë¡œ ì™¸ìš°ê³  ë„˜ì–´ê°„ë‹¤", tA: "T3", tB: "T5" },
{ q: "ìˆ™ì œê°€ ë§ì•„ì§€ë©´ ì•„ì´ëŠ”?", a: "í˜ë“¤ì–´ë„ ì¼ë‹¨ ë‹¤ í•˜ë ¤ê³  í•œë‹¤", b: "ë¶€ë‹´ë¼ì„œ ëŒ€ì¶© í•˜ê±°ë‚˜ ë¯¸ë£¬ë‹¤", tA: "T1", tB: "T2" },
{ q: "ê°€ì¥ ìì£¼ ë“£ëŠ” í”¼ë“œë°±ì€?", a: "â€œì„±ì‹¤í•œë° ë°©í–¥ì´ ì¢€ ì•„ì‰¬ì›Œâ€", b: "â€œë¨¸ë¦¬ëŠ” ì¢‹ì€ë° íƒœë„ê°€ ì•„ì‰¬ì›Œâ€", tA: "T1", tB: "T2" },
{ q: "ìˆ˜ì—… ì‹œê°„ì— ì•„ì´ëŠ”?", a: "ì„ ìƒë‹˜ ë§ì— ë”°ë¼ê°€ë©° ì ëŠ”ë‹¤", b: "ë‚˜ í˜¼ì ì´í•´í•œ ëŒ€ë¡œ ì •ë¦¬í•œë‹¤", tA: "T1", tB: "T4" },
{ q: "ë¬¸ì œ í’€ ë•Œ ì•„ì´ëŠ”?", a: "í‹€ë¦´ê¹Œ ë´ ë‹¤ì‹œ í•œ ë²ˆ ë” ë³¸ë‹¤", b: "ë§ì•˜ì„ ê²ƒ ê°™ìœ¼ë©´ ë°”ë¡œ ë„˜ê¸´ë‹¤", tA: "T3", tB: "T5" },
{ q: "ì„ ìƒë‹˜ì´ ê³ ì¹˜ë¼ê³  í•˜ë©´?", a: "ê³ ì¹œë‹¤", b: "ì†ìœ¼ë¡œëŠ” â€œë‚´ê°€ ë§ëŠ” ê²ƒ ê°™ì€ë°â€¦â€ í•œë‹¤", tA: "T1", tB: "T4" },
{ q: "ê³µë¶€í•  ë•Œ ì•„ì´ì˜ ëª¨ìŠµì€?", a: "ì˜¤ë˜ ì•‰ì•„ ìˆëŠ”ë° ì§„ë„ê°€ ëŠë¦¬ë‹¤", b: "ì§„ë„ëŠ” ë¹ ë¥¸ë° ì •í™•í•˜ì§€ëŠ” ì•Šë‹¤", tA: "T3", tB: "T5" },
{ q: "ìˆ™ì œë¥¼ ê¹œë¹¡í•œ ë‚  ì•„ì´ëŠ”?", a: "ë‹¤ìŒì—” ë” ì˜í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤", b: "â€œí•œ ë²ˆì¯¤ì´ì•¼â€ í•˜ê³  ë„˜ê¸´ë‹¤", tA: "T1", tB: "T2" },
{ q: "ë¬¸ì œë¥¼ í‹€ë¦¬ë©´ ì•„ì´ëŠ”?", a: "ì™œ í‹€ë ¸ëŠ”ì§€ ë‹¤ ì ì–´ë³¸ë‹¤", b: "ë‹µë§Œ ë³´ê³  ë„˜ì–´ê°„ë‹¤", tA: "T3", tB: "T2" },
{ q: "ì„ ìƒë‹˜ì´ ì•Œë ¤ì¤€ ë°©ë²•ë³´ë‹¤?", a: "ì„ ìƒë‹˜ ë°©ë²•ì´ ë” í¸í•˜ë‹¤", b: "ë‚´ ë°©ì‹ì´ ë” í¸í•˜ë‹¤", tA: "T1", tB: "T4" },
{ q: "ì‹œí—˜ ì ìˆ˜ê°€ ë–¨ì–´ì¡Œì„ ë•Œ?", a: "ì‹¤ìˆ˜ê°€ ë§ì•˜ë‹¤ê³  ëŠë‚€ë‹¤", b: "ì‹œê°„ì´ ë¶€ì¡±í–ˆë‹¤ê³  ëŠë‚€ë‹¤", tA: "T5", tB: "T3" },
{ q: "ê³µë¶€ ê³„íšì´ ì—†ìœ¼ë©´ ì•„ì´ëŠ”?", a: "ë¬´ì—‡ë¶€í„° í• ì§€ ì˜ ëª¨ë¥´ê² ë‹¤", b: "í•˜ê³  ì‹¶ì€ ê²ƒë¶€í„° í•œë‹¤", tA: "T1", tB: "T4" },
{ q: "ìˆ™ì œë¥¼ ì œì¶œí•  ë•Œ?", a: "ëê¹Œì§€ ë‹¤ ë§ì¶”ê³  ì œì¶œí•œë‹¤", b: "ì¼ë‹¨ ì œì¶œí•˜ëŠ” ë° ì˜ë¯¸ë¥¼ ë‘”ë‹¤", tA: "T3", tB: "T2" },
{ q: "ë¬¸ë²• ë¬¸ì œë¥¼ í’€ ë•Œ?", a: "ê·œì¹™ì„ ì •í™•íˆ ì™¸ì›Œì„œ í‘¼ë‹¤", b: "ëŠë‚Œ(ê°)ìœ¼ë¡œ í‘¼ë‹¤", tA: "T1", tB: "T5" },
{ q: "ê°€ì¥ ì•„ì´ì™€ ë¹„ìŠ·í•œ ë§ì€?", a: "â€œì—´ì‹¬íˆëŠ” í•˜ëŠ”ë° ì„±ì ì´ ì•ˆ ì˜¬ë¼.â€", b: "â€œì˜í•˜ëŠ”ë° ì‹¤ìˆ˜ ë•Œë¬¸ì— ì ìˆ˜ê°€ ë–¨ì–´ì ¸.â€", tA: "T1", tB: "T5" }
];

// [ë°ì´í„° 2] ê²°ê³¼ ì½˜í…ì¸  (ì´ë¯¸ì§€ URL í¬í•¨)
const resultData = {
    "T1": {
        code: "T1 TYPE",
        name: "ì„±ì‹¤í•˜ì§€ë§Œ ê°€ì´ë“œê°€ í•„ìš”í•œ ì•„ì´",
        quote: "â€œì§‘ì—ì„œëŠ” ì±…ìƒì— ì˜¤ë˜ ì•‰ì•„ ìˆëŠ”ë° ì„±ì ì´ ì•ˆ ì˜¬ë¼ìš”.â€",
        imgUrl: "https://api.dicebear.com/9.x/open-peeps/svg?seed=Buddy&clothing=blazerAndShirt&glasses=round&face=smile", // ì•ˆê²½, ë‹¨ì •í•¨
        diagnosis: "ì´ ì•„ì´ëŠ” ë†€ë¼ìš¸ ë§Œí¼ ì„±ì‹¤í•©ë‹ˆë‹¤. ë‹¤ë§Œ â€˜ì–´ë–»ê²Œâ€™ í•´ì•¼ í•˜ëŠ”ì§€ ë°©í–¥ì´ ì—†ì–´ì„œ í—›í˜ì„ ì“°ê³  ìˆì„ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. ì¬ëŠ¥ë³´ë‹¤ â€˜ì •í™•í•œ ë°©í–¥ ì œì‹œâ€™ê°€ ê°€ì¥ ì‹œê¸‰í•©ë‹ˆë‹¤.",
        prescription: "í˜¼ì ë…¸ë ¥í•˜ëŠ” ê³µë¶€ì—ì„œ â€˜ê´€ë¦¬ë°›ìœ¼ë©° ì„±ì¥í•˜ëŠ” ê³µë¶€â€™ë¡œ ë°”ê¿”ì•¼ í•©ë‹ˆë‹¤. ì‘ì€ ìˆ™ì œ í•˜ë‚˜ê¹Œì§€ë„ êµ¬ì¡°í™”ëœ ê°€ì´ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
        online: { program: "ìˆ™ì œê´€ë¦¬ ë¹¡ì„¼ë°˜", sub: "ìˆ™ì œ ëˆ„ë½ 0% Â· ê³µë¶€ ìˆœì„œ ê³ ì •" },
        offline: { program: "ë‹¨ì–´ ì±Œë¦°ì§€ (1ê°œ)", sub: "ìš•ì‹¬ë‚´ì§€ ë§ê³ , ë”± í•˜ë‚˜ë¥¼ ë§¤ì¼ í•´ë‚´ëŠ” ìŠµê´€ë¶€í„°!" }
    },
    "T2": {
        code: "T2 TYPE",
        name: "ë¨¸ë¦¬ëŠ” ì¢‹ì€ë° ëŒ€ì¶©í•˜ëŠ” ì•„ì´",
        quote: "â€œë¨¸ë¦¬ëŠ” ì¢‹ì€ë° ìˆ™ì œë¥¼ ë„ˆë¬´ ëŒ€ì¶© í•´ì™€ìš”.â€",
        imgUrl: "https://api.dicebear.com/9.x/open-peeps/svg?seed=Phil&clothing=hoodie&face=calm", // í›„ë“œí‹°, ì—¬ìœ ë¡œì›€
        diagnosis: "ì´í•´ë ¥ê³¼ ì§€ëŠ¥ì€ ì¶©ë¶„í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê³¼ì œ ë¶€ë‹´ì´ ì»¤ì§€ë©´ ë‡ŒëŠ” ì•Œë©´ì„œë„ ì†ì€ ëŒ€ì¶© ë„˜ì–´ê°€ ë²„ë¦¬ëŠ” íšŒí”¼ ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤.",
        prescription: "ê°•í•˜ê²Œ ë°€ì–´ë¶™ì¼ìˆ˜ë¡ ë” ëŒ€ì¶©í•˜ê²Œ ë©ë‹ˆë‹¤. í•™ìŠµ ë¶€ë‹´ì„ ì¤„ì´ê³ , ì„±ê³µ ê²½í—˜ì„ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì•„ â€˜ê³µë¶€ íš¨ëŠ¥ê°â€™ì„ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.",
        online: { program: "ë‹¨ê³¼ë°˜ (ìŠ¤ë©°ë“œëŠ” ë°˜)", sub: "ë¶€ë‹´ ì—†ì´ ê³µë¶€ ê°ê° ê¹¨ìš°ê¸°" },
        offline: { program: "ë‹¨ì–´ + ì›ì„œ ì±Œë¦°ì§€ (2ê°œ)", sub: "ì™¸ìš°ê¸°(ì•”ê¸°)ì™€ ì½ê¸°(ì‚¬ê³ )ë¥¼ ê°™ì´ í•´ì•¼ íƒœë„ê°€ ë°”ë€ë‹ˆë‹¤." }
    },
    "T3": {
        code: "T3 TYPE",
        name: "ê¼¼ê¼¼í•˜ì§€ë§Œ ì†ë„ê°€ ëŠë¦° ì•„ì´",
        quote: "â€œí‹€ë¦¬ëŠ” ê±´ ì—†ëŠ”ë° í•­ìƒ ì‹œê°„ì´ ëª¨ìë¼ìš”.â€",
        imgUrl: "https://api.dicebear.com/9.x/open-peeps/svg?seed=Dot&clothing=shirt&glasses=square&face=serious", // ì…”ì¸ , ì§„ì§€í•¨
        diagnosis: "ì •í™•í•¨ì´ë¼ëŠ” ê·€í•œ ë¬´ê¸°ë¥¼ ê°€ì¡Œì§€ë§Œ, ë„ˆë¬´ ì‹ ì¤‘í•´ì„œ ì‹œí—˜ì´ë¼ëŠ” â€˜ì‹œê°„ì˜ ë²½â€™ ì•ì—ì„œ ìì£¼ ë¬´ë„ˆì§‘ë‹ˆë‹¤.",
        prescription: "ì´ì œëŠ” â€˜í‹€ë¦¬ì§€ ì•ŠëŠ” ê³µë¶€â€™ì—ì„œ â€˜ì‹œê°„ ì•ˆì— ì™„ì„±í•˜ëŠ” ê³µë¶€â€™ë¡œ ë„˜ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. ê°•ì•½ì„ ì¡°ì ˆí•˜ë©° ì†ë„ë¥¼ ë¶™ì´ëŠ” í›ˆë ¨ì´ í•„ìš”í•©ë‹ˆë‹¤.",
        online: { program: "ê°•ì•½ì¡°ì ˆ ì£¼ 2íšŒë°˜", sub: "ì •í™•ë„ ìœ ì§€ + ì†ë„ í›ˆë ¨ ë³‘í–‰" },
        offline: { program: "ì›ì„œ + ì˜ì–´ì‹ ë¬¸ ì±Œë¦°ì§€ (2ê°œ)", sub: "ë¹ ë¥´ê²Œ ì½ê³  íŒë‹¨í•˜ëŠ” â€˜ì²˜ë¦¬ ì†ë„â€™ í›ˆë ¨ì´ í•µì‹¬!" }
    },
    "T4": {
        code: "T4 TYPE",
        name: "ê°ê°ì€ ì¢‹ì€ë° í”¼ë“œë°± ì•ˆ ë“£ëŠ” ì•„ì´",
        quote: "â€œìê¸° ë°©ì‹ë§Œ ê³ ì§‘í•´ì„œ ë§ì„ ì•ˆ ë“¤ì–´ìš”.â€",
        imgUrl: "https://api.dicebear.com/9.x/open-peeps/svg?seed=Bella&clothing=tee&face=cute", // ê°œì„±ìˆëŠ” ëª¨ìŠµ
        diagnosis: "ì–¸ì–´ì  ê°ê°ì´ íƒì›”í•˜ì§€ë§Œ, ìê¸° ë°©ì‹ì´ ë„ˆë¬´ í™•ê³ í•´ í”¼ë“œë°±ì„ â€˜ì”ì†Œë¦¬â€™ë¡œ ì—¬ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ê³ ì˜ ê¹Šì´ê°€ ì–•ì•„ì§ˆ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.",
        prescription: "ì„¤ë“í•˜ë ¤ í•˜ê¸°ë³´ë‹¤, í•˜ë£¨í•˜ë£¨ ì •í•´ì§„ ë£¨í‹´ì„ ìˆ˜í–‰í•˜ê²Œ í•˜ì—¬ â€˜êµ¬ì¡°ì  ì‚¬ê³ â€™ë¥¼ ëª¸ì— ìµíˆê²Œ ê°•ì œí•´ì•¼ í•©ë‹ˆë‹¤.",
        online: { program: "ì±Œë¦°ì§€ ìŠµê´€ë°˜", sub: "ë§¤ì¼ ê³ ì³ì§€ëŠ” ìŠµê´€ êµ¬ì¡° ë§Œë“¤ê¸°" },
        offline: { program: "ì›ì„œ + ì˜ì–´ì‹ ë¬¸ (2~3ê°œ)", sub: "ê°ìœ¼ë¡œ í‘¸ëŠ” ìŠµê´€, ì‚¬ê³ ë¥¼ ê°•ì œí•˜ëŠ” ë£¨í‹´ìœ¼ë¡œ êµì •í•´ì•¼ í•©ë‹ˆë‹¤." }
    },
    "T5": {
        code: "T5 TYPE",
        name: "ë‹¤ ì˜í•˜ëŠ”ë° ì‹¤ìˆ˜í•˜ëŠ” ì•„ì´",
        quote: "â€œë‹¤ ì˜í•˜ëŠ”ë° ì‹œí—˜ë§Œ ë³´ë©´ ê¼­ ì‹¤ìˆ˜ê°€ ë‚˜ì™€ìš”.â€",
        imgUrl: "https://api.dicebear.com/9.x/open-peeps/svg?seed=Avery&clothing=gymShirt&face=laugh", // í™œë™ì , ì—ë„ˆì§€
        diagnosis: "ì´ë¯¸ ìƒìœ„ê¶Œì— ë“¤ì–´ê°ˆ ìê²©ì€ ì¶©ë¶„í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸´ì¥í•˜ê±°ë‚˜ ë°©ì‹¬í•˜ëŠ” ìˆœê°„ ë°œìƒí•˜ëŠ” 1~2ê°œì˜ ì‹¤ìˆ˜ê°€ ë“±ê¸‰ì„ ê°€ë¥´ê³  ìˆìŠµë‹ˆë‹¤.",
        prescription: "ë” ë§ì€ ê³µë¶€ê°€ í•„ìš”í•œ ê²Œ ì•„ë‹™ë‹ˆë‹¤. ìì‹ ì˜ ì‹¤ìˆ˜ íŒ¨í„´ì„ íŒŒì•…í•˜ê³  êµì •í•˜ì—¬ â€˜ë°©ì–´ìœ¨â€™ì„ ë†’ì´ëŠ” í›ˆë ¨ì´ í•„ìš”í•©ë‹ˆë‹¤.",
        online: { program: "ì¢…í•©ë°˜", sub: "ìœ í˜• í†µí•© í›ˆë ¨ + ì‹¤ìˆ˜ íŒ¨í„´ êµì •" },
        offline: { program: "ë‹¨ì–´ + ì›ì„œ + ì‹ ë¬¸ (3ê°œ í’€ì„¸íŠ¸)", sub: "ì‹¤ë ¥ì„ ë„˜ì–´ â€˜ì‹¤ìˆ˜í•˜ì§€ ì•ŠëŠ” ì‹œìŠ¤í…œâ€™ì„ ì™„ì„±í•  ë‹¨ê³„ì…ë‹ˆë‹¤." }
    }
};

let currentQuestion = 0;
let scores = { T1: 0, T2: 0, T3: 0, T4: 0, T5: 0 };
let selectedMode = "";
let finalType = "";

// 1. í…ŒìŠ¤íŠ¸ ì‹œì‘
function startTest() {
    document.getElementById('start-screen').classList.remove('active');
    document.getElementById('question-screen').classList.add('active');
    showQuestion();
}

// 2. ì§ˆë¬¸ í‘œì‹œ
function showQuestion() {
    const q = questions[currentQuestion];
    document.getElementById('q-number').innerText = `Q${currentQuestion + 1} / ${questions.length}`;
    document.getElementById('question').innerText = q.q;
    document.getElementById('btn-a').innerText = q.a;
    document.getElementById('btn-b').innerText = q.b;

    const progressPercent = ((currentQuestion + 1) / questions.length) * 100;
    document.getElementById('progress').style.width = `${progressPercent}%`;
}

// 3. ë‹µë³€ ì„ íƒ
function selectOption(choice) {
    const q = questions[currentQuestion];
    if (choice === 'A') scores[q.tA]++;
    else scores[q.tB]++;

    currentQuestion++;
    if (currentQuestion < questions.length) {
        showQuestion();
    } else {
        calcResultType();
        document.getElementById('question-screen').classList.remove('active');
        document.getElementById('mode-screen').classList.add('active');
    }
}

// 4. ê²°ê³¼ ê³„ì‚°
function calcResultType() {
    let maxScore = -1;
    let type = "T1";
    for (const [key, value] of Object.entries(scores)) {
        if (value > maxScore) {
            maxScore = value;
            type = key;
        }
    }
    finalType = type;
}

// 5. ëª¨ë“œ ì„ íƒ
function selectMode(mode) {
    selectedMode = mode;
    document.getElementById('mode-screen').classList.remove('active');
    document.getElementById('loading-screen').classList.add('active');

    // ë¡œë”© í›„ ê²°ê³¼ ì¤€ë¹„
    setTimeout(() => {
        prepareResult();
    }, 2000);
}

// 6. ê²°ê³¼ í™”ë©´ ì¤€ë¹„ (ë¸”ëŸ¬ ìƒíƒœ)
function prepareResult() {
    document.getElementById('loading-screen').classList.remove('active');
    document.getElementById('result-screen').classList.add('active');

    document.getElementById('gate-overlay').style.display = 'block';
    document.getElementById('result-content').classList.add('blurred');

    const data = resultData[finalType];
    const programInfo = selectedMode === 'online' ? data.online : data.offline;
    const ctaText = selectedMode === 'online' ? "ì˜¨ë¼ì¸ ìˆ˜ì—… ìƒë‹´ ì‹ ì²­í•˜ê¸°" : "ì˜¤í”„ë¼ì¸ ì±Œë¦°ì§€ ìƒë‹´ ì‹ ì²­í•˜ê¸°";

    document.getElementById('result-img').src = data.imgUrl;
    document.getElementById('result-code').innerText = data.code;
    document.getElementById('result-title').innerText = data.name;
    document.getElementById('result-quote').innerText = data.quote;
    document.getElementById('result-diagnosis').innerText = data.diagnosis;
    document.getElementById('result-prescription').innerText = data.prescription;
    document.getElementById('result-program').innerText = programInfo.program;
    document.getElementById('result-sub-program').innerText = programInfo.sub;
    document.getElementById('cta-button').innerText = ctaText;

    // ì ìˆ˜ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
    const maxPossibleScore = 10; // ìµœëŒ€ ì ìˆ˜ (ëŒ€ëµì ì¸ ê°’)
    setTimeout(() => {
        for (const [key, value] of Object.entries(scores)) {
            const barPercent = Math.min((value / maxPossibleScore) * 100, 100);
            document.getElementById(`bar-${key.toLowerCase()}`).style.width = `${barPercent}%`;
            document.getElementById(`val-${key.toLowerCase()}`).innerText = value;
        }
    }, 300);
}

// 7. ì •ë³´ ì…ë ¥ í›„ ê²°ê³¼ ì ê¸ˆ í•´ì œ
function unlockResult() {
    const name = document.getElementById('user-name').value.trim();
    const phone = document.getElementById('user-phone').value.trim();
    const grade = document.getElementById('user-grade').value;

    if (!name || !phone || !grade) {
        alert("ì •í™•í•œ ë¶„ì„ ê²°ê³¼ë¥¼ ìœ„í•´ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
    }

    // ì—¬ê¸°ì— ì •ë³´ ìˆ˜ì§‘ ì½”ë“œ ì¶”ê°€ ê°€ëŠ¥
    alert(`${name} í•™ìƒì˜ ê²°ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.`);

    document.getElementById('gate-overlay').style.display = 'none';
    document.getElementById('result-content').classList.remove('blurred');
}

// ì˜ì—­ë³„ ì´ë¦„ ë§¤í•‘
const scoreLabels = {
    T1: "ì„±ì‹¤/ìˆœì‘",
    T2: "íš¨ìœ¨/íšŒí”¼",
    T3: "ì •í™•/ì‹ ì¤‘",
    T4: "ìê¸°ì£¼ë„",
    T5: "ì†ë„/ì§ê´€"
};

// ëª¨ë°”ì¼ ì—¬ë¶€ ì²´í¬
function isMobile() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

// 8. ìƒë‹´ í˜ì´ì§€ ì´ë™
function goToConsult() {
    const name = document.getElementById('user-name').value.trim();
    const phone = document.getElementById('user-phone').value.trim();
    const grade = document.getElementById('user-grade').value;
    const data = resultData[finalType];
    const programInfo = selectedMode === 'online' ? data.online : data.offline;

    // ì ìˆ˜ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬
    const sortedScores = Object.entries(scores)
        .sort((a, b) => b[1] - a[1])
        .map(([key, value]) => `${scoreLabels[key]}: ${value}ì `)
        .join('\n');

    const message = `[í•™ìŠµ ì„±í–¥ ì§„ë‹¨ ìƒë‹´ ì‹ ì²­]

â–  í•™ìƒ ì •ë³´
í•™ìƒ ì´ë¦„: ${name}
ì—°ë½ì²˜: ${phone}
í•™ë…„: ${grade}

â–  ì§„ë‹¨ ê²°ê³¼
ìœ í˜•: ${data.name}
í¬ë§ ìˆ˜ì—…: ${selectedMode === 'online' ? 'ì˜¨ë¼ì¸' : 'ì˜¤í”„ë¼ì¸'}
ì¶”ì²œ í”„ë¡œê·¸ë¨: ${programInfo.program}

â–  ì˜ì—­ë³„ ì ìˆ˜
${sortedScores}

â–  í•µì‹¬ ì§„ë‹¨
${data.diagnosis}`;

    // í´ë¦½ë³´ë“œ ë³µì‚¬ í›„ ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì—´ê¸°
    copyToClipboard(message).then(() => {
        const guideMsg = isMobile()
            ? "ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì±„íŒ…ì°½ì—ì„œ ê¸¸ê²Œ ëˆŒëŸ¬ ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”."
            : "ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì±„íŒ…ì°½ì—ì„œ Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”.";
        alert(guideMsg);
        location.href = "https://pf.kakao.com/_xnAxcrxj/chat";
    }).catch(() => {
        // í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ ì‹œ fallback
        alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì±„íŒ…ì°½ì´ ì—´ë¦¬ë©´ ì§ì ‘ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        location.href = "https://pf.kakao.com/_xnAxcrxj/chat";
    });
}

// í´ë¦½ë³´ë“œ ë³µì‚¬ í•¨ìˆ˜ (ëª¨ë°”ì¼ í˜¸í™˜)
function copyToClipboard(text) {
    // ìµœì‹  Clipboard API ì‹œë„
    if (navigator.clipboard && navigator.clipboard.writeText) {
        return navigator.clipboard.writeText(text);
    }

    // Fallback: execCommand ì‚¬ìš© (êµ¬í˜• ë¸Œë¼ìš°ì €/ëª¨ë°”ì¼ ëŒ€ì‘)
    return new Promise((resolve, reject) => {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.left = '-9999px';
        textarea.style.top = '-9999px';
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();

        try {
            const success = document.execCommand('copy');
            document.body.removeChild(textarea);
            if (success) {
                resolve();
            } else {
                reject();
            }
        } catch (err) {
            document.body.removeChild(textarea);
            reject(err);
        }
    });
}

</script>

</body>
</html>